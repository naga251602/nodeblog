# üöÄ SupaBlog: A Modern Node.js Blog with EJS & Supabase

![License](https://img.shields.io/badge/License-MIT-blue.svg)
![Node.js](https://img.shields.io/badge/Node.js-20.x-green.svg)
![Express.js](https://img.shields.io/badge/Express.js-4.x-brightgreen.svg)
![EJS](https://img.shields.io/badge/Templating-EJS-orange.svg)
![PostgreSQL - Database](https://img.shields.io/badge/Database-Supabase-brightgreen.svg?style=flat&logo=supabase&logoColor=white)

---

## üåü Overview

SupaBlog is a sleek and simple blogging application built using the power of Node.js with Express, EJS for dynamic templating, and Supabase as a robust, open-source Firebase alternative. It provides core blogging functionalities like creating, viewing, and listing posts, along with a full-fledged user authentication system.

This project serves as a fantastic starting point for anyone looking to build a server-rendered application with a modern backend-as-a-service (BaaS) like Supabase.

---

## ‚ú® Features

* **User Authentication**: Secure sign-up, sign-in, and logout powered by Supabase Auth.
* **Session Management**: Maintain user sessions using `express-session`.
* **Create Posts**: Authenticated users can create new blog posts with a title, content, and author.
* **View All Posts**: Browse a list of all published blog posts.
* **View Single Post**: Read the full content of an individual blog post.
* **Responsive Design**: Basic CSS for a clean and adaptable user interface.
* **Environment Variables**: Securely manage API keys and sensitive data with `dotenv`.
* **EJS Layouts**: Consistent page structure using `express-ejs-layouts`.

---

## üõ†Ô∏è Technologies Used

* **Backend**: [Node.js](https://nodejs.org/) & [Express.js](https://expressjs.com/)
* **Database & Auth**: [Supabase](https://supabase.com/) (PostgreSQL, Auth, etc.)
* **Templating**: [EJS (Embedded JavaScript)](https://ejs.com/)
* **Session Management**: [`express-session`](https://www.npmjs.com/package/express-session)
* **Environment Variables**: [`dotenv`](https://www.npmjs.com/package/dotenv)
* **Form Parsing**: [`body-parser`](https://www.npmjs.com/package/body-parser)
* **Styling**: Custom CSS

---

## üöÄ Getting Started

Follow these steps to get SupaBlog up and running on your local machine.

### Prerequisites

Before you begin, ensure you have the following installed:

* [Node.js](https://nodejs.org/en/download/) (v16 or higher recommended)
* [npm](https://www.npmjs.com/get-npm) (comes with Node.js)
* A [Supabase Account](https://supabase.com/dashboard/sign-up) and a new project created.

### Installation

1.  **Clone the repository:**
    ```bash
    git clone [https://github.com/](https://github.com/)<YOUR_GITHUB_USERNAME>/<YOUR_REPO_NAME>.git
    cd <YOUR_REPO_NAME>
    ```

2.  **Install Node.js dependencies:**
    ```bash
    npm install
    ```

### Supabase Setup

1.  **Create a New Supabase Project:**
    * Go to your [Supabase Dashboard](https://supabase.com/dashboard).
    * Click "New project".
    * Remember your database password.

2.  **Get Your Supabase API Keys:**
    * Navigate to **Project Settings** (gear icon) > **API**.
    * Copy your **Project URL** (e.g., `https://abcdefghijk.supabase.co`).
    * Copy your **`service_role` (secret) key**. **Keep this key secure! Do not expose it in client-side code.**
    * *(Optional but recommended)* Copy your `anon` (public) key if you plan to use client-side Supabase calls directly. For this server-rendered app, the `service_role` key is used for all Supabase interactions from `app.js`.

3.  **Create the `posts` Table:**
    * In your Supabase project, go to the **Table Editor** (spreadsheet icon).
    * Click `+ New table`.
    * Name it `posts`.
    * **Uncheck `Enable Row Level Security (RLS)`** for simplicity in this server-side-controlled app. (For client-side heavy apps, RLS is crucial!)
    * Add the following columns (or paste into SQL Editor):

        ```sql
        CREATE TABLE public.posts (
          id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
          title text NOT NULL,
          content text NOT NULL,
          author text NULL DEFAULT 'Anonymous'::text,
          created_at timestamptz NULL DEFAULT now(),
          CONSTRAINT posts_pkey PRIMARY KEY (id)
        );
        ```
    * Click "Save".

4.  **Configure Email Confirmation (Optional - for testing):**
    * In your Supabase project, go to **Authentication** (shield icon) > **Settings**.
    * For easier local testing, you might want to **toggle "Enable Email Confirmations" to OFF**. In production, keep this ON for security.

### Environment Variables

1.  **Create a `.env` file:**
    * In the root of your project directory, create a file named `.env`.

2.  **Add your Supabase credentials and a session secret:**
    ```dotenv
    SUPABASE_URL=YOUR_SUPABASE_PROJECT_URL_HERE
    SUPABASE_SERVICE_ROLE_KEY=YOUR_SUPABASE_SERVICE_ROLE_KEY_HERE
    SESSION_SECRET=SUPER_SECRET_RANDOM_STRING_CHANGE_ME_PLEASE_ABC123
    ```
    * **Replace the placeholder values** with your actual keys from Supabase and a strong, random string for `SESSION_SECRET`.

### Run the Application

1.  **Start the server:**
    ```bash
    node app.js
    ```
2.  **Open your browser:**
    * Navigate to `http://localhost:3000`

---

## üö¶ Usage

1.  **Home Page (`/`)**: View all blog posts.
2.  **Register (`/register`)**: Create a new user account.
3.  **Login (`/login`)**: Log in with an existing account.
4.  **Dashboard (`/dashboard`)**: A protected page accessible only to logged-in users.
5.  **Create Post (`/posts/new`)**: Accessible only after logging in. Fill out the form to publish a new blog post.
6.  **View Post (`/posts/:id`)**: Click on a post title from the home page to see its full content.
7.  **Logout (`/logout`)**: End your session.

---

## ü§ù Contributing

Contributions are welcome! If you have suggestions or want to improve the project, please follow these steps:

1.  Fork the repository.
2.  Create a new branch (`git checkout -b feature/AmazingFeature`).
3.  Make your changes and commit them (`git commit -m 'Add some AmazingFeature'`).
4.  Push to the branch (`git push origin feature/AmazingFeature`).
5.  Open a Pull Request.

---
